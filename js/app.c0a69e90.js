(function(t){function a(a){for(var s,o,r=a[0],c=a[1],l=a[2],d=0,u=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(a);while(u.length)u.shift()();return i.push.apply(i,l||[]),e()}function e(){for(var t,a=0;a<i.length;a++){for(var e=i[a],s=!0,o=1;o<e.length;o++){var r=e[o];0!==n[r]&&(s=!1)}s&&(i.splice(a--,1),t=c(c.s=e[0]))}return t}var s={},o={app:0},n={app:0},i=[];function r(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e921946e"}[t]+".js"}function c(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.e=function(t){var a=[],e={about:1};o[t]?a.push(o[t]):0!==o[t]&&e[t]&&a.push(o[t]=new Promise((function(a,e){for(var s="css/"+({about:"about"}[t]||t)+"."+{about:"ee52aee6"}[t]+".css",n=c.p+s,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var l=i[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===s||d===n))return a()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===s||d===n)return a()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=a,p.onerror=function(a){var s=a&&a.target&&a.target.src||n,i=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=s,delete o[t],p.parentNode.removeChild(p),e(i)},p.href=n;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){o[t]=0})));var s=n[t];if(0!==s)if(s)a.push(s[2]);else{var i=new Promise((function(a,e){s=n[t]=[a,e]}));a.push(s[2]=i);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=r(t);var u=new Error;l=function(a){d.onerror=d.onload=null,clearTimeout(p);var e=n[t];if(0!==e){if(e){var s=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",u.name="ChunkLoadError",u.type=s,u.request=o,e[1](u)}n[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(a)},c.m=t,c.c=s,c.d=function(t,a,e){c.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,a){if(1&a&&(t=c(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)c.d(e,s,function(a){return t[a]}.bind(null,s));return e},c.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(a,"a",a),a},c.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},c.p="/vue3esite/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=a,l=l.slice();for(var u=0;u<l.length;u++)a(l[u]);var p=d;i.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"0aa3":function(t,a,e){"use strict";var s=e("cec7"),o=e.n(s);o.a},"0cfc":function(t,a,e){"use strict";var s=e("95ba"),o=e.n(s);o.a},4678:function(t,a,e){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var a=n(t);return e(a)}function n(t){if(!e.o(s,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=n,t.exports=o,o.id="4678"},4734:function(t,a,e){"use strict";var s=e("9409"),o=e.n(s);o.a},"56d7":function(t,a,e){"use strict";e.r(a);e("cadf"),e("551c"),e("f751"),e("097d");var s=e("2b0e"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("nav",{staticClass:"navbar navbar-light bg-light"},[e("div",{staticClass:"shop"},[e("router-link",{attrs:{to:"/"}},[e("i",{staticClass:"fa fa-heart text-info",attrs:{"aria-hidden":"true"}}),t._v("\n     購物首頁\n    ")])],1),e("router-link",{staticClass:"login",attrs:{to:"/login"}},[t._v("管理頁面登入\n    ")]),e("div",{staticClass:"dropdown ml-12"},[e("button",{staticClass:"btn btn-sm btn-cart",attrs:{"data-toggle":"dropdown","data-flip":"false"}},[e("i",{staticClass:"fa fa-shopping-cart text-dark fa-2x",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cart.carts.length))]),e("span",{staticClass:"sr-only"},[t._v("unread messages")])]),e("div",{staticClass:"dropdown-menu dropdown-menu-right p-3",staticStyle:{"min-width":"300px"},attrs:{"data-offset":"400"}},[e("h6",[t._v("已選擇商品")]),e("table",{staticClass:"table table-sm"},[e("tbody",t._l(t.cart.carts,(function(a){return t.cart.carts.length?e("tr",{key:a.id},[e("td",{staticClass:"align-middle text-center"},[e("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeCart(a.id)}}},[e("i",{staticClass:"fa fa-trash-alt",attrs:{"aria-hidden":"true"}})])]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+t._s(a.product.unit))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(a.total))])]):t._e()})),0)]),e("router-link",{attrs:{to:"/customerorders"}},[e("button",{staticClass:"btn btn-primary btn-block"},[e("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}}),t._v(" 結帳去\n        ")])])],1)])],1),t._m(0),e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("router-view"),t._m(1)],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"jumbotron jumbotron-fluid jumbotron-bg d-flex align-items-end"},[e("div",{staticClass:"container"},[e("div",{staticClass:"p-3 bg-lighter"},[e("h1",{staticClass:"display-3 font-weight-bold"},[t._v("買到停不住！最後出清")]),e("p",{staticClass:"lead"},[t._v("This is a modified jumbotron that occupies\n          the entire horizontal space of its parent.")])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("footer",{staticClass:"bg-light text-muted py-5"},[e("div",{staticClass:"container"},[e("ul",{staticClass:"list-inline text-center"},[e("li",{staticClass:"list-inline-item"},[t._v("©資料、圖片、文章來源皆來自網路，僅用來做為學習用途。Copright 2019")]),e("br"),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("i",{staticClass:"fab fa-instagram",attrs:{"aria-hidden":"true"}}),t._v(" Instagrame")])]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("i",{staticClass:"fab fa-facebook-square",attrs:{"aria-hidden":"true"}}),t._v(" Facebook")])]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[t._v("About")])])]),e("p",{staticClass:"text-center"},[t._v("Made with Bootstrap4")])])])}],i={name:"App",data:function(){return{cart:{carts:[]},isLoading:!1}},methods:{getCart:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/cart");this.$http.get(a).then((function(a){a.data.data.carts&&(t.cart=a.data.data),t.isLoading=!1}))},removeCart:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/cart/").concat(t);a.isLoading=!0,this.$http.delete(e).then((function(t){a.isLoading=!1,a.getCart(),console.log("刪除購物車項目",t)}))}},created:function(){this.getCart()}},r=i,c=(e("5c0b"),e("2877")),l=Object(c["a"])(r,o,n,!1,null,null,null),d=l.exports,u=e("8c4f"),p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"container main-content mb-3"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"list-group sticky-top"},[t._l(t.categories,(function(a){return e("a",{key:a,staticClass:"list-group-item list-group-item-action",class:{active:a===t.searchText},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.searchText=a}}},[e("i",{staticClass:"fa fa-street-view",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(a)+"\n          ")])})),e("a",{staticClass:"list-group-item list-group-item-action",class:{active:""===t.searchText},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.searchText=""}}},[t._v("\n            全部顯示\n          ")])],2)]),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"d-flex mb-4"},[e("form",{staticClass:"form-inline my-3 my-lg-0"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.searchText},on:{input:function(a){a.target.composing||(t.searchText=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){t.searchText=""}}},[e("i",{staticClass:"fa fa-times"})])])])]),e("button",{staticClass:"btn btn-outline-primary ml-auto",attrs:{type:"button"},on:{click:t.getProducts}},[t._v("\n            重新取得產品資料\n          ")])]),e("div",{staticClass:"tab-pane",attrs:{id:"list-gift"}},[e("div",{staticClass:"row align-items-stretch"},t._l(t.filterData,(function(a){return e("div",{key:a.id,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card border-0 box-shadow text-center h-100"},[e("img",{staticClass:"card-img-top",attrs:{src:a.imageUrl,alt:"Card image cap"}}),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right"},[t._v(t._s(a.category))]),e("h4",{staticClass:"card-title"},[t._v(t._s(a.title))]),e("p",{staticClass:"card-text text-left"},[t._v(t._s(a.content))])]),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(a.id)}}},[t._v("\n                      看更多\n                  ")]),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(a.id)}}},[e("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}}),t._v("\n                      加到購物車\n                  ")])])])])})),0)])])])],1),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._m(0)]),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),e("blockquote",{staticClass:"blockquote mt-3"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),e("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.price?t._e():e("div",{staticClass:"h4"},[t._v(t._s(t.product.origin_price)+" 元")]),t.product.price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t.product.price?e("div",{staticClass:"h4"},[t._v("現在只要"+t._s(t.product.price)+" 元")]):t._e()]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.product,"num",a.target.multiple?e:e[0])}}},t._l(10,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v("\n                              選購 "+t._s(a)+" "+t._s(t.product.unit)+"\n                          ")])})),0)]),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n                          小計 "),e("strong",[t._v(t._s(t.product.num*t.product.price))]),t._v(" 元\n                      ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.addtoCart(t.product.id,t.product.num)}}},[t._v("\n                      加到購物車 \n                      ")])])])])])])},m=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],v=(e("1c4c"),e("ac6a"),e("5df3"),e("4f7f"),e("6762"),e("2fdb"),e("1157")),f=e.n(v),h={name:"Home",data:function(){return{products:[],product:{},searchText:"",categories:[],isLoading:!1,status:{loadingItem:""}}},computed:{filterData:function(){var t=this;return t.searchText?t.products.filter((function(a){var e=t.searchText===a.category?a.category.toLowerCase().includes(t.searchText.toLowerCase()):a.title.toLowerCase().includes(t.searchText.toLowerCase());return e})):this.products}},methods:{getProducts:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/products/all");t.isLoading=!0,this.$http.get(a).then((function(a){t.products=a.data.products,t.getUnique(),t.isLoading=!1}))},getProduct:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/product/").concat(t);this.$http.get(e).then((function(t){a.product=t.data.product,f()("#productModal").modal("show")}))},addtoCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/cart");e.isLoading=!0;var o={product_id:t,qty:a};e.isLoading=!0,this.$http.post(s,{data:o}).then((function(t){e.isLoading=!1,console.log("加入購物車:",t)}))},getUnique:function(){var t=this,a=new Set;t.products.forEach((function(t){a.add(t.category)})),t.categories=Array.from(a)}},created:function(){this.getProducts()}},g=h,b=(e("0cfc"),Object(c["a"])(g,p,m,!1,null,"743aa412",null)),_=b.exports,C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[t._m(0),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[t._v("\n                產品列表\n              ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/orders"}},[t._v("\n                訂單列表\n              ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupons"}},[t._v("\n                優惠券\n              ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.signout(a)}}},[t._v("登出")])])]),e("div",{staticClass:"text-right mt-1"})]),e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal(!0)}}},[t._v("建立新產品")]),e("table",{staticClass:"table mt-4"},[t._m(1),e("tbody",t._l(t.products,(function(a,s){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.category))]),e("td",[t._v(t._s(a.title))]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.origin_price)))]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.price)))]),e("td",[a.is_enabled?e("span",{staticClass:"text-success"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),e("td",[e("div",{staticStyle:{display:"inline-block",width:"100px"}},[e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openModal(!1,a)}}},[t._v("編輯")]),e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.delModal(a)}}},[t._v("刪除")])])])])})),0)]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disable:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),e("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._l(t.pagination.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProducts(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),e("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)]),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"imageUrl",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"customFile"}},[t._v("\n                  或 上傳圖片\n                  "),t.status.fileUploading?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),e("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),e("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl,alt:""}})]),e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"title",a.target.value)}}})]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"category"}},[t._v("分類")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"category",a.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("單位")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"unit",a.target.value)}}})])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"origin_price"}},[t._v("原價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"origin_price",a.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("售價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"price",a.target.value)}}})])]),e("hr"),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("產品描述")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"description",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("說明內容")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"content",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox","true-value":1,"false-value":0,id:"is_enabled"},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(a){var e=t.tempProduct.is_enabled,s=a.target,o=s.checked?1:0;if(Array.isArray(e)){var n=null,i=t._i(e,n);s.checked?i<0&&t.$set(t.tempProduct,"is_enabled",e.concat([n])):i>-1&&t.$set(t.tempProduct,"is_enabled",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.tempProduct,"is_enabled",o)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(3),e("div",{staticClass:"modal-body"},[t._v("\n          是否刪除\n          "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。\n        ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v("確認刪除")])])])])])],1)},x=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h6",{staticClass:"d-flex justify-content-between align-items-center mt-4 mb-4 text-muted"},[e("span",[t._v("管理介面")]),e("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[e("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{width:"120"}},[t._v("分類")]),e("th",[t._v("產品名稱")]),e("th",{attrs:{width:"120"}},[t._v("原價")]),e("th",{attrs:{width:"120"}},[t._v("售價")]),e("th",{attrs:{width:"100"}},[t._v("是否啟用")]),e("th",{attrs:{width:"80"}},[t._v("編輯")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("新增產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],y={data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,deleteId:"",isLoading:!1,status:{fileUploading:!1}}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/products?page=").concat(t);a.isLoading=!0,this.$http.get(e).then((function(t){a.isLoading=!1,a.products=t.data.products,a.pagination=t.data.pagination}))},openModal:function(t,a){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object.assign({},a),this.isNew=!1),f()("#productModal").modal("show")},updateProduct:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/product"),a="post",e=this;e.isNew||(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/product/").concat(e.tempProduct.id),a="put"),this.$http[a](t,{data:e.tempProduct}).then((function(t){console.log(t.data),t.data.success?(f()("#productModal").modal("hide"),e.getProducts()):(f()("#productModal").modal("hide"),e.getProducts(),console.log("新增失敗"))}))},delModal:function(t){f()("#delProductModal").modal("show"),this.deleteId=t.id},deleteProduct:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/product/").concat(t.deleteId);this.$http.delete(a).then((function(a){a.data.success?(f()("#delProductModal").modal("hide"),console.log("刪除成功"),t.getProducts()):(f()("#delProductModal").modal("hide"),t.getProducts(),console.log("刪除失敗"))}))},signout:function(){var t="".concat("https://vue-course-api.hexschool.io","/logout"),a=this;this.$http.post(t).then((function(t){console.log(t.data),t.data.success&&a.$router.push("/login")}))},uploadFile:function(){var t=this.$refs.files.files[0],a=this,e=new FormData;e.append("file-to-upload",t);var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/upload");a.status.fileUploading=!0,this.$http.post(s,e,{headers:{"content-Type":"multipart/form-data"}}).then((function(t){console.log(t.data),a.status.fileUploading=!1,t.data.success&&a.$set(a.tempProduct,"imageUrl",t.data.imageUrl)}))}},created:function(){this.getProducts()}},j=y,w=Object(c["a"])(j,C,x,!1,null,null,null),k=w.exports,P=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.carts,(function(a,s){return e("tr",{key:a.id},[e("td",{attrs:{width:"20px"}},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeCartItem(a.id)}}},[e("i",{staticClass:"fas fa-trash-alt"})])]),e("td",{attrs:{width:"100px"}},[t._v(t._s(a.product.title)+"\n             "),a.coupon?e("div",{staticClass:"text-success"},[t._v("\n                 已使用優惠券\n             ")]):t._e()]),e("td",{attrs:{width:"50px"}},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),e("td",{attrs:{width:"50px",align:"right"}},[t._v(t._s(t._f("currency")(a.total)))])])})),0),e("tfoot",[e("tr",[e("td",{attrs:{colspan:"3",align:"right"}},[t._v("原價")]),e("td",{attrs:{align:"right"}},[t._v(t._s(this.total))])]),this.final_total!==this.total?e("tr",[e("td",{staticClass:"text-success",attrs:{colspan:"3",align:"right"}},[t._v("折扣價")]),e("td",{staticClass:"text-success",attrs:{align:"right"}},[t._v(t._s(this.final_total))])]):t._e()])]),e("div",{staticClass:"my-5 row justify-content-center"},[e("form",{staticClass:"col-md-6",on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v("\n        "+t._s(t.errors.first("email"))+"\n      ")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",name:"phoneNubmer",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t.errors.has("phoneNubmer")?e("span",{staticClass:"text-danger"},[t._v("請輸入電話")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"comment"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10",placeholder:"問題或建議"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),t._m(1)])])],1)},$=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th"),e("th",[t._v("產品名稱")]),e("th",[t._v("數量")]),e("th",[t._v("單價")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger"},[t._v("送出訂單")])])}],L={data:function(){return{products:[],product:{},carts:{},total:0,final_total:0,form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1,coupon_code:""}},methods:{getProducts:function(){var t=this,a="https://vue-course-api.hexschool.io/api/jw310/products";t.loading=!0,this.$http.get(a).then((function(a){console.log(a.data),t.products=a.data.products,t.loading=!1}))},getProduct:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/product/").concat(t);a.status.loadingItem=t,this.$http.get(e).then((function(t){a.product=t.data.product,f()("#productModal").modal("show"),a.status.loadingItem=""}))},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/cart");t.isLoading=!0,this.$http.get(a).then((function(a){console.log(a.data.data),t.carts=a.data.data.carts,t.total=a.data.data.total,t.final_total=a.data.data.final_total,t.isLoading=!1}))},removeCartItem:function(t){var a=this,e=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/cart/").concat(t);e.isLoading=!0,this.$http.delete(s).then((function(t){a.getCart(),e.isLoading=!1}))},createOrder:function(){var t=this,a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/order"),s=a.form;this.$validator.validate().then((function(o){o?t.$http.post(e,{data:s}).then((function(t){console.log("訂單已建立",t),t.data.success&&a.$router.push("/customercheckout/".concat(t.data.orderId)),a.isLoading=!1})):console.log("欄位不完整")}))}},created:function(){this.getProducts(),this.getCart()}},M=L,O=(e("4734"),Object(c["a"])(M,P,$,!1,null,"3e6a8224",null)),N=O.exports,E=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form",{staticClass:"form-signin",on:{submit:function(a){return a.preventDefault(),t.signin(a)}}},[e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Please sign in")]),e("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(a){a.target.composing||t.$set(t.user,"username",a.target.value)}}}),e("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}}),t._m(0),e("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("Sign in")]),e("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("© 2019")])])])},D=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"checkbox mb-3"},[e("label",[e("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" Remember me\n         ")])])}],q={name:"Login",data:function(){return{user:{username:"",password:""}}},methods:{signin:function(){var t="".concat("https://vue-course-api.hexschool.io","/admin/signin"),a=this;this.$http.post(t,a.user).then((function(t){console.log(t.data),t.data.success&&a.$router.push("/admin")}))}}},T=q,z=(e("0aa3"),Object(c["a"])(T,E,D,!1,null,"38f07732",null)),I=z.exports,S=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[t._m(0),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[t._v("\n                  產品列表\n                ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/orders"}},[t._v("\n                  訂單列表\n                ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupons"}},[t._v("\n                  優惠券\n                ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.signout(a)}}},[t._v("登出")])])])]),e("table",{staticClass:"table mt-4"},[t._m(1),e("tbody",t._l(t.Orders,(function(a,s){return e("tr",{key:a.id},[e("td",[t._v(t._s(t._f("timestamp")(a.create_at)))]),e("td",[t._v(t._s(a.user.name))]),e("td",[t._v(t._s(a.user.tel))]),e("td",[t._v(t._s(a.products.product))]),e("td",[t._v(t._s(a.total))]),e("td",[a.is_paid?e("span",{staticClass:"text-success"},[t._v("已付款")]):e("span",[t._v("未付款")])])])})),0)]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disable:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getOrders(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),e("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._l(t.pagination.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getOrders(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getOrders(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),e("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)]),e("div",{staticClass:"modal fade",attrs:{id:"delOrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[t._v("\n            是否刪除\n            "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempOrder.title))]),t._v(" 商品(刪除後將無法恢復)。\n          ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteOrder}},[t._v("確認刪除")])])])])])],1)},A=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h6",{staticClass:"d-flex justify-content-between align-items-center mt-4 mb-4 text-muted"},[e("span",[t._v("管理介面")]),e("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[e("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("購買時間")]),e("th",[t._v("訂購人")]),e("th",[t._v("訂購人電話")]),e("th",[t._v("購買品項")]),e("th",[t._v("應付金額")]),e("th",[t._v("是否付款")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],U={data:function(){return{Orders:[],pagination:{},deleteId:"",tempOrder:{},isLoading:!1,status:{fileUploading:!1}}},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/orders?page=").concat(t);a.isLoading=!0,this.$http.get(e).then((function(t){console.log(t.data),a.isLoading=!1,a.Orders=t.data.orders,a.pagination=t.data.pagination}))},deleteOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/order/").concat(t.deleteId);this.$http.delete(a).then((function(t){}))},openModal:function(t){this.tempOrder=Object.assign({},t)},delModal:function(t){f()("#delOrderModal").modal("show"),this.deleteId=t.id},signout:function(){var t="".concat("https://vue-course-api.hexschool.io","/logout"),a=this;this.$http.post(t).then((function(t){console.log(t.data),t.data.success&&a.$router.push("/login")}))}},created:function(){this.getOrders()}},F=U,Y=Object(c["a"])(F,S,A,!1,null,null,null),B=Y.exports,H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"my-5 row justify-content-center"},[e("form",{staticClass:"col-md-6",on:{submit:function(a){return a.preventDefault(),t.payOrder(a)}}},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.order.products,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(a.final_total))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),e("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])]),e("table",{staticClass:"table"},[e("tbody",[e("tr",[e("th",{attrs:{width:"100"}},[t._v("Email")]),e("td",[t._v(t._s(t.order.user.email))])]),e("tr",[e("th",[t._v("姓名")]),e("td",[t._v(t._s(t.order.user.name))])]),e("tr",[e("th",[t._v("收件人電話")]),e("td",[t._v(t._s(t.order.user.tel))])]),e("tr",[e("th",[t._v("收件人地址")]),e("td",[t._v(t._s(t.order.user.address))])]),e("tr",[e("th",[t._v("付款狀態")]),e("td",[t.order.is_paid?e("span",{staticClass:"text-success"},[t._v("付款完成")]):e("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger"},[t._v("確認付款")])]):t._e()])])},G=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("th",[t._v("品名")]),e("th",[t._v("數量")]),e("th",[t._v("單價")])])}],J={data:function(){return{order:{user:{}},orderId:""}},methods:{getOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/order/").concat(t.orderId);t.isLoading=!0,this.$http.get(a).then((function(a){console.log(a.data.order),t.order=a.data.order,t.isLoading=!1}))},payOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/pay/").concat(t.orderId);t.isLoading=!0,this.$http.post(a).then((function(a){console.log(a),a.data.success&&t.getOrder(),t.isLoading=!1}))}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},K=J,R=Object(c["a"])(K,H,G,!1,null,null,null),V=R.exports,W=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[t._m(0),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[t._v("\n                  產品列表\n                ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/orders"}},[t._v("\n                  訂單列表\n                ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupons"}},[t._v("\n                  優惠券\n                ")])],1)]),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.signout(a)}}},[t._v("登出")])])]),e("div",{staticClass:"text-right mt-1"})]),e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal(!0)}}},[t._v("建立新優惠券")]),e("table",{staticClass:"table mt-4"},[t._m(1),e("tbody",t._l(t.Coupons,(function(a,s){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.title))]),e("td",[t._v(t._s(a.code))]),e("td",[t._v(t._s(a.percent))]),e("td",[t._v(t._s(a.dua_date))]),e("td",[a.is_enabled?e("span",{staticClass:"text-success"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),e("td",[e("div",{staticStyle:{display:"inline-block",width:"100px"}},[e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openModal(!1,a)}}},[t._v("編輯")]),e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.delModal(a)}}},[t._v("刪除")])])])])})),0)]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disable:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),e("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._l(t.pagination.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProducts(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),e("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)]),e("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("優惠名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入優惠名稱"},domProps:{value:t.tempCoupon.title},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"title",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"code"}},[t._v("優惠碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"code",a.target.value)}}})]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"percent"}},[t._v("折扣％數")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"text",id:"percent",placeholder:"請輸入折扣％數"},domProps:{value:t.tempCoupon.percent},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"percent",a.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"percent"}},[t._v("到期日")]),e("date-picker",{attrs:{config:{format:"DD/MM/YYYY"}},model:{value:t.tempCoupon.dua_date,callback:function(a){t.$set(t.tempCoupon,"dua_date",a)},expression:"tempCoupon.dua_date"}})],1)]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox","true-value":1,"false-value":0,id:"is_enabled"},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(a){var e=t.tempCoupon.is_enabled,s=a.target,o=s.checked?1:0;if(Array.isArray(e)){var n=null,i=t._i(e,n);s.checked?i<0&&t.$set(t.tempCoupon,"is_enabled",e.concat([n])):i>-1&&t.$set(t.tempCoupon,"is_enabled",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.tempCoupon,"is_enabled",o)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"delcouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(3),e("div",{staticClass:"modal-body"},[t._v("\n            是否刪除\n            "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 商品(刪除後將無法恢復)。\n          ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteCoupons}},[t._v("確認刪除")])])])])])],1)},Q=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h6",{staticClass:"d-flex justify-content-between align-items-center mt-4 mb-4 text-muted"},[e("span",[t._v("管理介面")]),e("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[e("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("優惠名稱")]),e("th",[t._v("優惠碼")]),e("th",[t._v("折扣\b%數")]),e("th",[t._v("到期日")]),e("th",[t._v("是否啟用")]),e("th",[t._v("編輯")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("新增優惠券")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],X={data:function(){return{Coupons:[],pagination:{},couponId:"",tempCoupon:{},isNew:!1,isLoading:!1}},methods:{getCoupons:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this,a="https://vue-course-api.hexschool.io/api/jw310/admin/coupons?page=${page}";t.isLoading=!0,this.$http.get(a).then((function(a){console.log(a.data),t.isLoading=!1,t.Coupons=a.data.coupons,t.pagination=a.data.pagination,console.log(t.Coupons)}))},updateCoupon:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/coupon"),a="post",e=this;e.isNew||(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/coupon/").concat(e.tempCoupon.id),a="put"),this.$http[a](t,{data:e.tempCoupon}).then((function(t){t.data.success?(f()("#couponModal").modal("hide"),e.getCoupons()):(f()("#couponModal").modal("hide"),e.getCoupons(),console.log("新增失敗"))}))},openModal:function(t,a){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=Object.assign({},a),this.isNew=!1),f()("#couponModal").modal("show")},deleteCoupons:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jw310","/admin/coupon/").concat(t.couponId);this.$http.delete(a).then((function(a){a.data.success?(f()("#delcouponModal").modal("hide"),console.log("刪除成功"),t.getCoupons()):(f()("#delcouponModal").modal("hide"),t.getCoupons(),console.log("刪除失敗"))}))},delModal:function(t){f()("#delcouponModal").modal("show"),this.couponId=t.id},signout:function(){var t="".concat("https://vue-course-api.hexschool.io","/logout"),a=this;this.$http.post(t).then((function(t){console.log(t.data),t.data.success&&a.$router.push("/login")}))}},created:function(){this.getCoupons()}},Z=X,tt=Object(c["a"])(Z,W,Q,!1,null,null,null),at=tt.exports,et=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.signout(a)}}},[t._v("登出")])])},st=[],ot={name:"Logout",data:function(){return{msg:"Welcome to Your Vue.js App"}},methods:{signout:function(){var t="".concat("https://vue-course-api.hexschool.io","/logout"),a=this;this.$http.post(t).then((function(t){console.log(t.data),t.data.success&&a.$router.push("/login")}))}}},nt=ot,it=(e("b567"),Object(c["a"])(nt,et,st,!1,null,"3bda458f",null)),rt=it.exports;s["a"].use(u["a"]);var ct=new u["a"]({routes:[{path:"*",redirect:"Login"},{path:"/",name:"home",component:_},{path:"/login",name:"login",component:I},{path:"/logout",name:"logout",component:rt},{path:"/admin",name:"admin",component:function(){return e.e("about").then(e.bind(null,"b6a5"))}},{path:"/admin/products",name:"Products",component:k},{path:"/admin/orders",name:"Orders",component:B},{path:"/admin/coupons",name:"Coupons",component:at},{path:"/customerorders",name:"CustomerOrders",component:N},{path:"/customercheckout/:orderId",name:"CustomerCheckout",component:V}]}),lt=e("bc3a"),dt=e.n(lt),ut=e("a7fe"),pt=e.n(ut),mt=(e("4989"),e("9062")),vt=e.n(mt),ft=(e("e40d"),e("a481"),e("c5f6"),function(t){var a=Number(t);return"$".concat(a.toFixed(0).replace(/./g,(function(t,a,e){var s=a&&"."!==t&&(e.length-a)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))}),ht=function(t){var a=new Date(1e3*t),e=a.getFullYear(),s=a.getMonth()+1;s=s<10?"0"+s:s;var o=a.getDate();o=o<10?"0"+o:o;var n=a.getHours();n=n<10?"0"+n:n;var i=a.getMinutes();i=i<10?"0"+i:i;var r=a.getSeconds();r=r<10?"0"+r:r;var c="".concat(e,"/").concat(s,"/").concat(o);return c},gt=e("7bb1"),bt=e("133f"),_t=e.n(bt),Ct=e("2f62");s["a"].use(Ct["a"]);var xt=new Ct["a"].Store({state:{},mutations:{},actions:{}});s["a"].config.productionTip=!1,s["a"].use(pt.a,dt.a),dt.a.defaults.withCredentials=!0,s["a"].component("Loading",vt.a),s["a"].filter("currency",ft),s["a"].filter("timestamp",ht),s["a"].use(_t.a),s["a"].use(gt["a"],{events:"input|blur"}),new s["a"]({el:"#app",router:ct,store:xt,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,a,e){"use strict";var s=e("e332"),o=e.n(s);o.a},9409:function(t,a,e){},"95ba":function(t,a,e){},9783:function(t,a,e){},b567:function(t,a,e){"use strict";var s=e("9783"),o=e.n(s);o.a},cec7:function(t,a,e){},e332:function(t,a,e){}});
//# sourceMappingURL=app.c0a69e90.js.map